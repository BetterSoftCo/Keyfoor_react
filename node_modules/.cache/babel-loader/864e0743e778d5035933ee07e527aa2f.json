{"ast":null,"code":"import _toConsumableArray from\"/Users/psycho/Documents/code/betterSoftCo/Keyfoor_react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _classCallCheck from\"/Users/psycho/Documents/code/betterSoftCo/Keyfoor_react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/psycho/Documents/code/betterSoftCo/Keyfoor_react/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/psycho/Documents/code/betterSoftCo/Keyfoor_react/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/psycho/Documents/code/betterSoftCo/Keyfoor_react/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{RiSearch2Line}from\"react-icons/ri\";import{NavLink,Outlet}from\"react-router-dom\";import{CloseCircle}from\"../../../assets\";import Chat from\"../../components/Chat\";import ChatController from\"../../controllers/ChatController\";import Layout from\"../../layout/Layout\";import AllChats from\"./AllChats/AllChats\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatPage=/*#__PURE__*/function(_ChatController){_inherits(ChatPage,_ChatController);var _super=_createSuper(ChatPage);function ChatPage(){_classCallCheck(this,ChatPage);return _super.apply(this,arguments);}_createClass(ChatPage,[{key:\"componentDidMount\",value:function componentDidMount(){if(window.screen.width>991&&!window.location.href.includes(\"group\"))this.props.navigate(\"chat/friends/\".concat(this.state.friends[0].username));}},{key:\"render\",value:function render(){var _this=this;var location=this.props.location.pathname;var username=location.split(\"/\")[3];var group=this.state.group;var friends=this.state.friends;var allChat=[].concat(_toConsumableArray(friends),_toConsumableArray(group));var searchHandler=function searchHandler(e){_this.setState({inputValue:e.target.value});if(e.target.value){var filter=allChat.filter(function(item){return item.username.toLowerCase().includes(e.target.value.toLowerCase())||item.name.includes(e.target.value);});var friendsFilter=filter.filter(function(item){return item.isJoin==undefined;});var groupFilter=filter.filter(function(item){return item.isJoin!==undefined;});console.log(friendsFilter);console.log(groupFilter);_this.setState({searched:filter,friendsSearch:friendsFilter,groupSearch:groupFilter});}};return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(\"section\",{className:\"chat-Page d-flex flex-row align-items-start justify-content-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:username?\"chat-List my-4\":\"chat-List2  my-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-Search d-felx align-items-center justify-content-between \".concat(this.state.isFocus?\"inputFocused\":null,\" \"),onFocus:function onFocus(){return _this.setState({isFocus:true});},onBlur:function onBlur(){return _this.setState({isFocus:false});},children:[this.state.inputValue!==\"\"?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this.setState({isFocus:false,inputValue:\"\"});},children:/*#__PURE__*/_jsx(\"img\",{src:CloseCircle,alt:\"close\"})}):/*#__PURE__*/_jsx(RiSearch2Line,{className:\"icon-search mx-2\"}),/*#__PURE__*/_jsx(\"input\",{type:\"search\",className:\"input\",placeholder:\"\\u062C\\u0633\\u062A\\u062C\\u0648\",value:this.state.inputValue,onChange:searchHandler})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-100  d-flex flex-row justify-content-around align-items-center chat-tabs my-4\",children:[this.state.inputValue!==\"\"?/*#__PURE__*/_jsx(NavLink,{end:true,to:\"#\",className:\"active-Chat-tabs\",children:\"\\u0647\\u0645\\u0647\"}):null,/*#__PURE__*/_jsx(NavLink,{end:true,to:window.screen.width>991?\"/chat/friends/\".concat(this.state.friends[0].username):\"/chat\",onClick:function onClick(){return _this.setState({isFocus:false,inputValue:\"\"});},className:function className(_ref){var _ref$isActive=_ref.isActive,isActive=_ref$isActive===void 0?String:_ref$isActive;return isActive&&!_this.state.inputValue||location.includes(\"/friends/\")&&!_this.state.inputValue?\"active-Chat-tabs\":\"\";},children:\"\\u062F\\u0648\\u0633\\u062A\\u0627\\u0646\"}),/*#__PURE__*/_jsx(NavLink,{to:window.screen.width>991?\"/chat/group/\".concat(this.state.group[0].username):\"/chat/group\",onClick:function onClick(){return _this.setState({isFocus:false,inputValue:\"\"});},className:function className(_ref2){var _ref2$isActive=_ref2.isActive,isActive=_ref2$isActive===void 0?String:_ref2$isActive;return isActive&&!_this.state.inputValue?\"active-Chat-tabs\":\"\";},children:\"\\u06AF\\u0631\\u0648\\u0647 \\u0647\\u0627\"})]}),this.state.inputValue?/*#__PURE__*/_jsx(AllChats,{location:location,searched:this.state.searched}):/*#__PURE__*/_jsx(Outlet,{})]}),/*#__PURE__*/_jsx(Chat,{state:this.state})]})});}}]);return ChatPage;}(ChatController);export default ChatPage;","map":{"version":3,"names":["RiSearch2Line","NavLink","Outlet","CloseCircle","Chat","ChatController","Layout","AllChats","ChatPage","window","screen","width","location","href","includes","props","navigate","state","friends","username","pathname","split","group","allChat","searchHandler","e","setState","inputValue","target","value","filter","item","toLowerCase","name","friendsFilter","isJoin","undefined","groupFilter","console","log","searched","friendsSearch","groupSearch","isFocus","isActive","String"],"sources":["/Users/psycho/Documents/code/betterSoftCo/Keyfoor_react/src/views/pages/ChatPage/ChatPage.tsx"],"sourcesContent":["import { RiSearch2Line } from \"react-icons/ri\";\nimport { NavLink, Outlet } from \"react-router-dom\";\nimport { CloseCircle } from \"../../../assets\";\nimport Chat from \"../../components/Chat\";\nimport ChatController from \"../../controllers/ChatController\";\nimport Layout from \"../../layout/Layout\";\nimport AllChats from \"./AllChats/AllChats\";\n\nclass ChatPage extends ChatController {\n  componentDidMount() {\n    if (window.screen.width > 991 && !window.location.href.includes(\"group\"))\n      this.props.navigate(`chat/friends/${this.state.friends[0].username}`);\n  }\n  render() {\n    const location = this.props.location.pathname;\n    const username = location.split(\"/\")[3];\n    const group = this.state.group;\n    const friends = this.state.friends;\n    const allChat: any = [...friends, ...group];\n    const searchHandler = (e: any) => {\n      this.setState({ inputValue: e.target.value });\n      if (e.target.value) {\n        const filter = allChat.filter(\n          (item: any) =>\n            item.username\n              .toLowerCase()\n              .includes(e.target.value.toLowerCase()) ||\n            item.name.includes(e.target.value)\n        );\n        const friendsFilter = filter.filter(\n          (item: any) => item.isJoin == undefined\n        );\n        const groupFilter = filter.filter(\n          (item: any) => item.isJoin !== undefined\n        );\n        console.log(friendsFilter);\n        console.log(groupFilter);\n        this.setState({\n          searched: filter,\n          friendsSearch: friendsFilter,\n          groupSearch: groupFilter,\n        });\n      }\n    };\n    return (\n      <Layout>\n        <section className=\"chat-Page d-flex flex-row align-items-start justify-content-start\">\n          <div className={username ? \"chat-List my-4\" : \"chat-List2  my-4\"}>\n            <div\n              className={`input-Search d-felx align-items-center justify-content-between ${\n                this.state.isFocus ? \"inputFocused\" : null\n              } `}\n              onFocus={() => this.setState({ isFocus: true })}\n              onBlur={() => this.setState({ isFocus: false })}\n            >\n              {this.state.inputValue !== \"\" ? (\n                <button\n                  onClick={() =>\n                    this.setState({ isFocus: false, inputValue: \"\" })\n                  }\n                >\n                  <img src={CloseCircle} alt=\"close\" />\n                </button>\n              ) : (\n                <RiSearch2Line className=\"icon-search mx-2\" />\n              )}\n              <input\n                type=\"search\"\n                className=\"input\"\n                placeholder=\"جستجو\"\n                value={this.state.inputValue}\n                onChange={searchHandler}\n              />\n            </div>\n            <div className=\"w-100  d-flex flex-row justify-content-around align-items-center chat-tabs my-4\">\n              {this.state.inputValue !== \"\" ? (\n                <NavLink end to=\"#\" className=\"active-Chat-tabs\">\n                  همه\n                </NavLink>\n              ) : null}\n              <NavLink\n                end\n                to={\n                  window.screen.width > 991\n                    ? `/chat/friends/${this.state.friends[0].username}`\n                    : \"/chat\"\n                }\n                onClick={() =>\n                  this.setState({ isFocus: false, inputValue: \"\" })\n                }\n                className={({ isActive = String }) =>\n                  (isActive && !this.state.inputValue) ||\n                  (location.includes(\"/friends/\") && !this.state.inputValue)\n                    ? \"active-Chat-tabs\"\n                    : \"\"\n                }\n              >\n                دوستان\n              </NavLink>\n              <NavLink\n                to={\n                  window.screen.width > 991\n                    ? `/chat/group/${this.state.group[0].username}`\n                    : \"/chat/group\"\n                }\n                onClick={() =>\n                  this.setState({ isFocus: false, inputValue: \"\" })\n                }\n                className={({ isActive = String }) =>\n                  isActive && !this.state.inputValue ? \"active-Chat-tabs\" : \"\"\n                }\n              >\n                گروه ها\n              </NavLink>\n            </div>\n            {this.state.inputValue ? (\n              <AllChats location={location} searched={this.state.searched} />\n            ) : (\n              <Outlet />\n            )}\n          </div>\n          <Chat state={this.state} />\n        </section>\n      </Layout>\n    );\n  }\n}\n\nexport default ChatPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}